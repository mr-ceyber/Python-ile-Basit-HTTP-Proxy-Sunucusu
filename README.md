# Python ile Basit HTTP Proxy Sunucusu
ğŸŒ Python ile Basit HTTP Proxy SunucusuğŸ“ Proje Ã–zetiBu proje, Python'Ä±n yerleÅŸik HTTP sunucu modÃ¼lleri (http.server, socketserver) ve popÃ¼ler requests kÃ¼tÃ¼phanesi kullanÄ±larak geliÅŸtirilmiÅŸ, minimal ve eÄŸitim odaklÄ± bir HTTP/HTTPS Vekil Sunucu (Proxy) uygulamasÄ±dÄ±r. AmacÄ±, istemciden gelen istekleri alÄ±p belirli bir hedef URL'ye iletmek, yanÄ±tÄ± almak ve istemciye geri gÃ¶ndermek suretiyle temel bir proxy mekanizmasÄ±nÄ±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± gÃ¶stermektir.âœ¨ Temel Ã–zelliklerURL TabanlÄ± YÃ¶nlendirme: Ä°stemciler, hedef URL'yi doÄŸrudan proxy adresinin yol (path) kÄ±smÄ±nda belirtir (Ã–rn: http://localhost:8080/https://example.com).Ã‡oklu Metot DesteÄŸi: GET ve POST HTTP metotlarÄ±nÄ± destekler.BaÅŸlÄ±k (Header) Filtreleme: Proxy sunucusu ve baÄŸlantÄ± katmanÄ± iÃ§in gereksiz olan baÅŸlÄ±klarÄ± (Ã¶rn: Host, Connection) otomatik olarak temizler.Ã–zel Loglama: TÃ¼m gelen istekleri, hedef URL'yi ve sonuÃ§ durum kodunu (status code) kaydeden yerleÅŸik bir loglama mekanizmasÄ± iÃ§erir.Log GÃ¶rÃ¼ntÃ¼leme ArayÃ¼zÃ¼: /logs adresine yapÄ±lan isteklerle toplanan loglar HTML formatÄ±nda gÃ¶rÃ¼ntÃ¼lenebilir.Hata YÃ¶netimi: AÄŸ baÄŸlantÄ±sÄ± sorunlarÄ± (502 Bad Gateway) ve iÃ§ sunucu hatalarÄ± (500 Internal Error) iÃ§in temel hata yakalama mekanizmasÄ±na sahiptir.ğŸ› ï¸ Kurulum ve Ã‡alÄ±ÅŸtÄ±rmaGereksinimlerBu projeyi Ã§alÄ±ÅŸtÄ±rmak iÃ§in yalnÄ±zca Python 3 ve requests kÃ¼tÃ¼phanesine ihtiyacÄ±nÄ±z vardÄ±r.Bash# Gerekli kÃ¼tÃ¼phaneyi kurun
pip install requests
Ã‡alÄ±ÅŸtÄ±rmaProjeyi baÅŸlatmak iÃ§in terminalde aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n:Bashpython proxy.py
Sunucu varsayÄ±lan olarak http://localhost:8080 adresinde baÅŸlayacaktÄ±r.ğŸš€ Proxy baÅŸlatÄ±ldÄ±: http://localhost:8080
KullanÄ±m Ã–rnekleriAmaÃ§URLGET isteÄŸihttp://localhost:8080/https://www.google.comLoglarÄ± GÃ¶rÃ¼ntÃ¼lemehttp://localhost:8080/logsğŸ’» Kod Analizi: proxy.pyProjenin kalbi olan proxy.py dosyasÄ±ndaki temel sÄ±nÄ±flar ve metotlar aÅŸaÄŸÄ±da detaylandÄ±rÄ±lmÄ±ÅŸtÄ±r.1. Global DeÄŸiÅŸkenler ve YardÄ±mcÄ± FonksiyonlarPORT = 8080: Proxy'nin dinleyeceÄŸi TCP portudur.logs = []: TÃ¼m log kayÄ±tlarÄ±nÄ±n string olarak tutulduÄŸu global liste.add_log(text): Log kaydÄ±nÄ± hem konsola yazdÄ±ran hem de logs listesine ekleyen fonksiyondur.2. ProxyHandler SÄ±nÄ±fÄ±Bu sÄ±nÄ±f, tÃ¼m HTTP isteklerini iÅŸlemek iÃ§in http.server.BaseHTTPRequestHandler sÄ±nÄ±fÄ±ndan tÃ¼retilmiÅŸtir.2.1. log_message(self, format, *args)Bu metot, BaseHTTPRequestHandler'Ä±n varsayÄ±lan loglama iÅŸlevini override eder. Gelen tÃ¼m eriÅŸim loglarÄ±nÄ± formatlayarak add_log fonksiyonu aracÄ±lÄ±ÄŸÄ±yla hem konsola hem de logs listesine kaydeder.2.2. do_GET(self) ve do_POST(self)Gelen GET ve POST isteklerini iÅŸleyen ana giriÅŸ noktalarÄ±dÄ±r.Ä°stek yolu /logs ise, loglarÄ± gÃ¶steren _serve_logs() metodu Ã§aÄŸrÄ±lÄ±r.DiÄŸer tÃ¼m istekler, proxy mantÄ±ÄŸÄ±nÄ±n bulunduÄŸu _handle_proxy() metoduna yÃ¶nlendirilir.2.3. _serve_logs(self)/logs adresine eriÅŸildiÄŸinde Ã§alÄ±ÅŸÄ±r.HTTP 200 OK yanÄ±tÄ± dÃ¶ndÃ¼rÃ¼r.logs listesindeki tÃ¼m kayÄ±tlarÄ± alarak, basit bir HTML <pre> etiketi iÃ§inde formatlar ve istemciye gÃ¶nderir.2.4. _handle_proxy(self, method) - Vekil Sunucu Ã‡ekirdeÄŸiBu metot, asÄ±l proxy iÅŸlevini gerÃ§ekleÅŸtirir.AdÄ±mAÃ§Ä±klamaKod DetayÄ±URL Ã‡Ä±karÄ±mÄ±Ä°stek yolundan (self.path) Ã¶ndeki / kaldÄ±rÄ±lÄ±r (self.path[1:]). URL'deki Ã¶zel karakterler (%20 gibi) unquote() ile Ã§Ã¶zÃ¼lÃ¼r.raw = unquote(self.path[1:])URL DoÄŸrulamaÃ‡Ä±karÄ±lan URL, urlparse() ile ayrÄ±ÅŸtÄ±rÄ±lÄ±r. Åema (http veya https) ve aÄŸ konumu (netloc) kontrol edilerek geÃ§ersiz formatlar iÃ§in 400 Bad Request hatasÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.if parsed.scheme not in ("http", "https") or not parsed.netloc:POST GÃ¶vdesiEÄŸer metot POST ise, Content-Length baÅŸlÄ±ÄŸÄ± okunur ve istek gÃ¶vdesi (self.rfile.read(length)) alÄ±nÄ±r.body = self.rfile.read(length)BaÅŸlÄ±k Filtreleme (Giden)Host, Connection, Transfer-Encoding gibi proxy trafiÄŸine Ã¶zgÃ¼ baÅŸlÄ±klar, hedef sunucuya iletilmeden Ã¶nce filtrelenir. AyrÄ±ca, giden istek baÅŸlÄ±klarÄ±na User-Agent: MiniProxy/1.1 eklenir.if lk in ("host", "connection", ...): continueÄ°letimPython requests.request() fonksiyonu kullanÄ±larak hedef URL'ye istek atÄ±lÄ±r. allow_redirects=False ayarÄ± ile yÃ¶nlendirmelerin kontrolÃ¼ proxy'ye bÄ±rakÄ±lÄ±r.resp = requests.request(...)YanÄ±tÄ± YÃ¶nlendirmeHedef sunucudan alÄ±nan yanÄ±tÄ±n durum kodu (resp.status_code) istemciye gÃ¶nderilir.self.send_response(resp.status_code)BaÅŸlÄ±k Filtreleme (Gelen)Gelen yanÄ±tta da Content-Encoding, Transfer-Encoding, Connection gibi baÅŸlÄ±klar istemciye iletilmeden filtrelenir.if lk in ("content-encoding", "transfer-encoding", ...): continueÄ°Ã§eriÄŸi GÃ¶ndermeYanÄ±tÄ±n iÃ§eriÄŸi (resp.content) doÄŸrudan istemciye yazÄ±lÄ±r (self.wfile.write).self.wfile.write(resp.content)Hata YÃ¶netimirequests.exceptions.RequestException (Ã¶rn. zaman aÅŸÄ±mÄ± veya baÄŸlantÄ± kurulamamasÄ±) yakalandÄ±ÄŸÄ±nda 502 Bad Gateway hatasÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.except requests.exceptions.RequestException as e:3. run() FonksiyonuBu ana fonksiyon, socketserver.TCPServer kullanarak belirtilen portta (PORT) ProxyHandler sÄ±nÄ±fÄ±nÄ± dinlemeye baÅŸlar ve sunucuyu kalÄ±cÄ± olarak Ã§alÄ±ÅŸtÄ±rÄ±r (httpd.serve_forever()).âš ï¸ Dikkat Edilmesi GerekenlerBu proje, bir eÄŸitim aracÄ± ve temel bir uygulama olarak tasarlanmÄ±ÅŸtÄ±r. Ãœretim ortamÄ±nda kullanÄ±lmasÄ± iÃ§in daha fazla gÃ¼venlik, hata kontrolÃ¼, performans optimizasyonu (Ã¶nbellekleme gibi) ve eÅŸzamanlÄ±lÄ±k (threading/asyncio) yÃ¶netimi gereklidir.
